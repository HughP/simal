<?xml version="1.0" encoding="UTF-8"?>
<!--
  Copyright 2007 University of Oxford

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->
<!DOCTYPE howto PUBLIC "-//APACHE//DTD How-to V2.0//EN"
"http://forrest.apache.org/dtd/howto-v20.dtd">
<howto>
  <header>
    <title>How to develop Simal</title>

    <version>0.1</version>

    <abstract>This How-To describes how to set up your development envirnment
    for working with Simal. Since Simal uses many Eclipse plugins in components
    of the Simal project it makes most sense for you to work within the Eclipse
    environment (although this is not a requirement, it just makes your life
    easier). This how-to therefore focuses on configuring Eclipse for working
    on Simal.</abstract>

    <last-modified-content-date date="2007-04-05" />
  </header>

  <audience title="Intended Audience">
    <p>People wishing to participate in the development of Simal.</p>
  </audience>

  <purpose title="Purpose">
    <p>To identify the ideal development environment for working with Simal.</p>
  </purpose>

  <prerequisites title="Prerequisites">
    <p>Readers should</p>

    <ul>
      <li>Have at least a basic understanding of XML, XSLT and Java</li>
      <li>Have at least a basic understanding of Java development in Eclipse</li>
    </ul>

  </prerequisites>

  <steps title="Install and Configure Eclipse">
    <section>
      <title>Essential Plugins</title>
        
      <section>
        <title>Eclipse 3.3 + Web Tools Project 2.0</title>
        
        <p class="instruction">If you do not currently have eclipse installed we recomend that you 
        download and unpack the 
        <a href="http://download.eclipse.org/webtools/downloads/">Eclipse + WTP</a> All in one
        package.</p>
        
        <p class="instruction">If you already have eclipse then you will need to ensure that you also
        have the <a href="http://download.eclipse.org/webtools/downloads/">WTP</a>
        plugins installed.</p> 
      </section>
      
      <section>
        <title>Apache Derby</title>
        <p>Apache Derby, an <a href="http://db.apache.org/">Apache DB subproject</a>,
        is an open source relational database implemented entirely in Java.
        Some key advantages include:</p>
        
        <ul>  
          <li>small footprint</li>  
          <li>implments JDBC, and
            <a href="http://wiki.apache.org/db-derby/SQLvsDerbyFeatures">SQL</a> standards.
          </li>
          <li>embedded JDBC driver that lets you embed 
          Derby in any Java-based solution.</li>
          <li>supports the more familiar client/server mode with the
          Derby Network Client JDBC 
          driver and Derby Network Server.</li>
          <li> Derby is easy to install, deploy, and use.</li>
       </ul>

        <p class="instruction">Download the Derby Core and Derby UI Plugins <a href="http://db.apache.org/derby/derby_downloads.html">Derby 
        downloads page</a> and unpack them into your Eclipse directory.</p>
      </section>
      
      <section>
        <title>Dali</title>
        <p>The goal of the Dali JPA Tools Project, a sub-project of the  Web Tools 
        Platform Project, is to build extensible frameworks and exemplary tools for 
        the definition and editing of Object-Relational (O/R) mappings for EJB 3.0 
        Java Persistence API (JPA) Entities. JPA mapping support focuses on 
        minimising the complexity of mapping by providing creation and automated 
        initial mapping wizards, and programming assistance such as dynamic problem 
        identification. </p>
        
        <p class="instruction">Download <a href="http://www.eclipse.org/dali/downloads.html">Dali</a> and
        unpack it in the Eclipse directory created in the previous section.</p>
      </section>
          
      <section>
        <title>Subclipse</title>
          <p>We use a Subversion repository for our source code, therefore you need
          the subclipse plugins for working with the repository. Follow these simple 
          steps:</p>
          
          <p class="instruction">In the Eclipse menu select 
          <em>Help -> Software Updates -> Find and Install...</em></p>
          <p class="instruction">In the resulting dialog select <em>Search for new
          features to install</em> then click <em>next</em></p>
          <p class="instruction">Click <em>New Remote Site...</em></p>
          <p class="instruction">Enter a <em>Name</em> of Subclipse and
          and <em>URL</em> of http://subclipse.tigris.org/update_1.2.x and click <em>Finish</em></p>
          <p class="instruction">After a short delay whilst the update site is searched you will
          be able to expand the <em>subclipse</em> node and select <em>subclipse</em> for download.</p>
          <p class="instruction">[OPTIONAL] You may also choose to install the Mylar Integration
          plugin at this time. Mylar is not required, but is one of the optional plugins we
          will discuss later in this document.</p>
          <p class="instruction">Click <em>Next</em></p>
          <p class="instruction">Agree to the license terms (assuming you do agree that is)
          and click <em>Next</em></p>
          <p class="instruction">Review the plugins you have selected and click <em>Finish</em></p>
          <p class="instruction">After the plugins are downloaded click the <em>Install All</em> 
          button</p>
          <p class="instruction">Restart Eclipse when asked to do so</p>
        </section>
    </section>
        
    <section>
      <title>Get Simal Sources</title>
      <p>The first thing you need to do is checkout the Simal source code. To do this
      use the <a href="/resources/simal.psf">simal.psf</a> team set.</p>
      
      <p class="instruction">Save the <a href="/resources/simal.psf">simal.psf</a>
      file in a convenient location</p>
       
      <p class="instruction">In Eclipse select <em>File -> Import</em></p>
      
      <p class="instruction">In the dialog select <em>Team -> Team Project Set</em>
      and click <em>Next</em></p>
      
      <p class="instruction">Select the <em>simal.psf</em> file you saved earlier and
      click <em>Finish</em></p>
      
      <p>After following these steps the source code for Simal will be checked out from
      version control, ready for you to start work.</p>
    </section>
    
    <section>
      <title>Get Rich Ajax Platform Sources</title>
      <p>At the time of writing we are using the CVS head version of the Eclipse
      Rich Ajax Platform. It is expected that, in the future, we will use a stable
      release of this code, but at present we need some features only available in
      CVS head. Follow the instructions on the 
      <a href="http://www.eclipse.org/rap/cvs.php">Eclipse RAP</a> site.</p>
    </section>
    
    <section>
      <title>Test Setup So Far</title>
      
      <fixme author="rdg">The simal configuration described in this section
      is not brought across as part of the import, neither is the model.test
      plugin.</fixme>
      
      <section>
        <title>Start Derby Database Server</title>
    
	      <p>During development we use an embedded Apache Derby database. This
	      enables you to do development work independently of any production
	      database. The first thing you need to do is start the databse server.</p>
	      
	      <p class="instruction">right click on the <em>uk.ac.osswatch.simal.model.derby</em>
	      project</p>
	      <p class="instruction">select <em>Apache Derby -> Start Network Server</em></p>
      </section>
      
      <section>
        <title>Create Database</title>
    
	      <p>A script to create the Simal database is provided in 
	      <code>uk.ac.osswatch.simal.model.derby/src/META-INF/setup.sql</code>.
	      This script creates the structure of the database, but it does not 
	      populate it with any data. In order to run it you must:</p>
	      
	      <p class="instruction">right click on the <em>uk.ac.osswatch.simal.model.derby/src/META-INF/setup.sql</em>
	      project</p>
	      <p class="instruction">select <em>Apache Derby -> Run SQL Script using 'ij'</em></p>
      </section>
      
      <section>
        <title>Testing the database setup</title>
        
        <p>You should now be able to run the complete database test suite.</p>
      
        <p class="instruction">right click on <em>uk.ac.osswatch.simal.model.derby/src/test/uk.ac.osswatch.simal.service.derby/TestManagedProjectBean</em></p>
        <p class="instruction">select 'Run As' -> 'JUnit Test'</p>
        
        <p>In the JUnit test results page you should see 100% sucess.
        If you do not then please contact the Simal developers list for
        assistance.</p>
      </section>
      <section>
        <title>Run the Simal Management Webapp</title>
        
	      <p>Now you should now be able to run the Simal web application.</p>
	      
	      <p class="instruction">Open the <em>Run</em>
	      wizard by selecting <em>Run --> Run</em> from the Eclipse menu. In the wizard 
	      choose <em>Equinox OSGi Framework -> Simal RAP (Test Database)</em> and after that click <em>run</em>.
	      Some messages in the console view should indicate that the http service was started 
	      at port 9090. Now open a browser and type navigate to 
	      <em>http://localhost:9090/rap</em> to access the Simal application.</p>
	  </section>
    </section>
    
    
    <section>
      <title>Optional Plugins</title>
      
      <section>
        <title>Mylar</title>
        <fixme author="rdg">Describe Mylar: http://www.eclipse.org/mylar/</fixme>
      </section>
    </section>
  </steps>


<!--
  <extension title="Presenting the field as read only data">
    <fixme author="rdg">Describe how to display the data element in a read
    only page as opposed to a form.</fixme>
  </extension>
 
  <faqs id="faqs">
    <title>Frequently Asked Questions</title>
    <faqsection id="faq-general">
      <title>General issues</title>
      <faq id="faq-difference">
        <question>What is the difference between a How-To and a
        tutorial?</question>

        <answer>
          <p>The goal of a How-To is to help the reader to accomplish a specific
          task with clear and consise instructions. While tutorials may contain
          How-To-like instructions and content, they also include additional
          background and conceptual content to help teach their readers higher
          order concepts along the way. How-Tos are concerned about filling an
          immediate, short-term need. Tutorials often provide long-term
          knowledge which can be applied across a range of needs.</p>
        </answer>
      </faq>
    </faqsection>

    <faqsection id="faq-style">
      <title>Style issues</title>
      <faq id="spelling">
        <question>What spelling convention should I follow?</question>

        <answer>
          <p>Use whatever spelling convention (American, British, etc.) that is
          most intuitive to you.</p>
        </answer>
      </faq>
    </faqsection>
  </faqs>

  <tips title="Tips">
    <section id="tip-dtd">
      <title>How-To dtd</title>

      <p>The document structure is likely to change at some time. Please note that
      this HOWTO page is likely to change as well.</p>
    </section>
  </tips>
  -->
 
  <references title="References">
        <ul>
      <li>An introduction to working with Deby in Eclipse <a
      href="http://www.eclipse.org/articles/Article-EclipseDbWebapps/article.html">Creating 
      Database Web Applications with Eclipse</a></li>
      
    </ul>
  </references>

</howto>
