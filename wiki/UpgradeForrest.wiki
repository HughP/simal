#summary How to upgrade the Forrest instance in Simal
#labels Phase-Implementation,Phase-Support

Simal depends on [http://forrest.apache.org Apache Forrest]. Since we use some cutting edge features of Apache Forrest we use a snapshot build. This document describes how to upgrade the version in use within Simal.

= Preparation =

You must have the latest development version of Apache Forrest available. You can check it out from SVN using the commands:

{{{
svn co http://svn.apache.org/repos/asf/forrest/trunk forrest
}}}

For more information see the [http://forrest.apache.org/contrib.html Forrest developer documentation].

You must set the environment variable {{{FORREST_HOME}}} to point to the Forrest checkout directory.

You need Apache ANT installed (it comes with Forrest, see FORREST_HOME/tools/ant) and in your path.

Your simal svn must be checked out with the command:

{{{
svn checkout https://simal.googlecode.com/svn/trunk/ simal
}}}

Note that this differs in two respects from the command given in GettingStarted:
 * *using https:// rather than http:// * this is to allow for authentication to be performed

= Build Apache Forrest =

From within the Apache Forrest checkout directory run the following commands:

{{{
cd main
./build clean
./build
}}}

= Upgrade Apache Forrest in Simal =

The full upgrade process takes a couple of minutes, so we provide shortcut that will work in most circumstances for testing. However, once testing is complete you must always do the full upgrade.

== Upgrade for testing ==

To test recent changes within Forrest you should run the following command:


{{{
ant upgrade-forrest-local
}}}

This does not clean out the old version of Forrest and so you are not guaranteed that all updates will be brought across. However, it will work in most cases. If you get some unexpected behaviour we recommend you follow the process for upgrading for release, see below.

== Upgrade for release ==

Once you have tested your new version of Forrest you will need to upgrade the Forrest zip as bundled with a Simal release. From within the Simal project directory run the following commands:

{{{
ant upgrade-forrest
}}}
 